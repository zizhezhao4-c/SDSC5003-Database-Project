{
    "_comment": "WorldQuant Alpha MongoDB导入配置文件 (以_或//开头的字段是注释)",
    "//": "========================================",
    "//1": "MongoDB连接设置 (仅27017脚本使用)",
    "//": "========================================",
    "db_host": "localhost",
    "//db_host": "MongoDB服务器地址",
    "db_port_27017": 27017,
    "//db_port_27017": "27017端口 (用于3_mongo_import_27017.py)",
    "db_port_27018": 27018,
    "//db_port_27018": "27018端口 (用于3_mongo_import_27018.py)",
    "db_name_regular": "regular_alphas",
    "//db_name_regular": "Regular Alphas数据库名称 (27017专用)",
    "db_name_super": "super_alphas",
    "//db_name_super": "Super Alphas数据库名称 (27017专用)",
    "//": "========================================",
    "//2": "数据源路径配置",
    "//": "========================================",
    "data_base_path": null,
    "//data_base_path": "包含所有Alpha数据的根目录，null=使用默认路径 (WQ_DATA_ROOT/USER_KEY/final_data)",
    "//": "========================================",
    "//3": "集合名称配置 (仅27017脚本使用)",
    "//": "========================================",
    "regular_collection": null,
    "//regular_collection": "存放Regular Alphas的集合名，null=使用USER_KEY",
    "super_collection": null,
    "//super_collection": "存放Super Alphas的集合名，null=使用USER_KEY",
    "//": "========================================",
    "//4": "性能调优参数",
    "//": "========================================",
    "workers": 64,
    "//workers": "并行工作进程数，null=自动 (CPU核心数-2)。注意：workers × batch_size 决定内存占用，过高会导致系统资源耗尽",
    "batch_size": 5000,
    "//batch_size": "每个进程一次读取的文件数量（不是写入数量）。建议值：小文件(<100万)=5000-10000，大批次(>100万)=2000-5000",
    "//内存估算": "粗略估算：workers × batch_size × 4KB ≈ 内存占用。例如：32 × 5000 × 4KB = 640MB (安全)，128 × 10000 × 4KB = 5GB (危险)",
    "//": "========================================",
    "//5": "其他设置",
    "//": "========================================",
    "key_field": "id",
    "//key_field": "文档的唯一标识字段",
    "state_file": null,
    "//state_file": "记录已处理文件的日志文件路径，null=使用默认路径",
    "use_smart_validation": false,
    "//use_smart_validation": "启用智能校验功能 (仅27017和dual脚本支持)",
    "IMPORT_MODE": "smart_incremental_slow",
    "//IMPORT_MODE": "incremental_fast=快速增量（仅检查alpha_id是否存在，不检测变更，最快）| incremental_slow=完整增量（检查alpha_id+文件变更，准确但较慢）| smart_merge=智能增量（查数据库最新时间+智能匹配文件夹）| smart_incremental_slow=智能慢速增量（智能选月+哈希检测变更，推荐）| time_range=时间范围（根据Alpha的dateModified/dateCreated过滤N小时内的数据）| overwrite=覆盖更新（全部+智能合并）| rebuild=重建数据库（全部+完全替换-危险）",
    "TIME_RANGE_HOURS": 25,
    "//TIME_RANGE_HOURS": "time_range模式的小时范围，根据Alpha的dateModified/dateCreated字段判断，默认25小时",
    "TIME_RANGE_BUFFER_DAYS": 10,
    "//TIME_RANGE_BUFFER_DAYS": "time_range模式的缓冲余量（天），避免因时区、文件命名延迟等问题遗漏数据，默认3天",
    "FAST_MODE": true,
    "//FAST_MODE": "快速模式：只扫描最近N个月的目录（N由FAST_MODE_MONTHS指定，默认3）。适合日常增量更新，跳过旧数据扫描。此模式优先级最高，会覆盖smart_merge/time_range的月份过滤",
    "FAST_MODE_MONTHS": 2,
    "//FAST_MODE_MONTHS": "快速模式扫描的月份数量，默认3个月。每周运行时可设为1-2，跨月时设为2。",
    "//说明_分批处理": "分批阈值自动计算 = workers × batch_size（例如：64×1000=64000），文件数超过此值时启用分批预加载",
    "USE_BATCH_QUERY": true,
    "//USE_BATCH_QUERY": "是否使用批量查询优化（推荐），true=每个worker独立查询（省内存），false=预加载模式（费内存）",
    "USE_PRELOAD": false,
    "//USE_PRELOAD": "是否启用预加载优化（overwrite/smart_merge模式），true=预加载到内存（会复制到每个worker，大批次时占用6GB+内存！），false=子进程独立查询（推荐，省内存）",
    "PARALLEL_DAYS_MODE": false,
    "//PARALLEL_DAYS_MODE": "并行多天处理模式（方案C），true=自动检测并并行处理多天（推荐），false=按月处理",
    "//PARALLEL_DAYS_说明": "当月份目录下有日目录且每天文件数<20000时，自动启用并行多天处理，可节省40%时间和80%内存",
    "//": "========================================",
    "//6": "三个导入脚本的参数对比",
    "//": "========================================",
    "//脚本1": "3_mongo_import_27017.py - 导入到27017端口",
    "//脚本1参数": "db_host, db_port_27017, db_name_regular, db_name_super, data_base_path, regular_collection, super_collection, workers, batch_size, key_field, state_file, use_smart_validation, incremental_mode",
    "//脚本2": "3_mongo_import_27018.py - 导入到27018端口",
    "//脚本2参数": "data_base_path, workers, batch_size, key_field, state_file, incremental_mode (不支持use_smart_validation)",
    "//脚本3": "3_mongo_import_dual.py - 同时导入到27017和27018",
    "//脚本3参数": "data_base_path, workers, batch_size, key_field, state_file, use_smart_validation, incremental_mode",
    "//": "========================================",
    "//7": "参数总结",
    "//": "========================================",
    "//共有参数": "data_base_path, workers, batch_size, key_field, state_file, IMPORT_MODE, TIME_RANGE_HOURS (所有脚本都有)",
    "//27017独有": "db_host, db_port_27017, db_name_regular, db_name_super, regular_collection, super_collection",
    "//27017+dual共有": "use_smart_validation (27018不支持)",
    "//": "========================================",
    "//8": "常见场景配置",
    "//": "========================================",
    "//场景1": "高性能导入: workers=8, batch_size=2000",
    "//场景2": "稳定导入: workers=4, batch_size=1000",
    "//场景3": "低资源导入: workers=2, batch_size=500",
    "//场景4": "日常增量更新: IMPORT_MODE=incremental_fast (推荐，最快，仅导入新alpha)",
    "//场景4b": "准确增量更新: IMPORT_MODE=incremental_slow (检测alpha变更并更新)",
    "//场景5": "智能增量更新: IMPORT_MODE=smart_merge (查数据库最新时间，自动匹配新文件夹)",
    "//场景6": "时间范围更新: IMPORT_MODE=time_range, TIME_RANGE_HOURS=25 (根据Alpha修改时间过滤)",
    "//场景7": "覆盖更新全部: IMPORT_MODE=overwrite (智能合并，保留本地字段)",
    "//场景8": "重建数据库: IMPORT_MODE=rebuild (完全替换，删除本地字段-危险)",
    "//场景9": "智能校验: use_smart_validation=true (仅27017和dual)",
    "//场景10": "日常快速更新: FAST_MODE=true (只扫描最近3个月，节省时间)"
}